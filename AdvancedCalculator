public class AdvancedCalculator {

      // Fixed-changed to double return for negative exp
    public double Power(double base, int exp) {
        //checking undefined case
        if (base == 0 && exp < 0) {
            throw new ArithmeticException("0 cannot have negative exponent");
        }

        double result = 1.0;

         //handle positive exponent normally
        if (exp >= 0) {
            for (int i = 0; i < exp; i++) {
                result = result * base;
            }
        } else {
            int posExp = -exp;
            double temp = 1.0;
            for (int i = 0; i < posExp; i++) {
                temp = temp * base;
            }
            result = 1.0 / temp;
        }

        return result;
    }
    public double SquareRoot(double n) {
        if (n < 0) {
            throw new ArithmeticException("Square root of negative number not allowed");
        }
        return Math.sqrt(n);
    }

    public boolean IsPrime(int n) {
          //properly check for numbers less than 2
        if (n <= 1) return false;

         //simple prime checking
        for (int i = 2; i <= n / 2; i++) {
            if (n % i == 0) {
                return false;
            }
        }
        return true;
    }

    public long Factorial(int n) {
        if (n < 0) {
            throw new ArithmeticException("Factorial of negative number not allowed");
        }

        long result = 1;

         //using long because factorial(20) is big
        for (int i = 1; i <= n; i++) {
            result = result * i; // normal loop
        }

        return result;
    }

}
